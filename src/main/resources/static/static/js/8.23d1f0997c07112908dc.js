webpackJsonp([8],{442:function(e,t,a){a(499);var r=a(108)(a(462),a(484),null,null);e.exports=r.exports},449:function(e,t,a){"use strict";a.d(t,"c",function(){return o}),a.d(t,"b",function(){return l});var r={emailReg:/^[a-z0-9A-Z]+([-|_|\.]+[a-z0-9A-Z]+)*@([a-z0-9A-Z]+[-|\.])+[a-zA-Z]{2,5}$/,idCardReg:/^(([1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{4})|([1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|(X|x))))$/,phoneReg:/^1[34578]\d{9}$/},o=function(e){return"[object Array]"===Object.prototype.toString.call(e)?e:[]},l=function(e,t){var a=void 0;return function(){for(var r=this,o=arguments.length,l=Array(o),s=0;s<o;s++)l[s]=arguments[s];a&&clearTimeout(a),a=setTimeout(function(){e.apply(r,l)},t)}};t.a=r},462:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a(449);t.default={data:function(){return{id:this.$route.params.id,isStaff:!1,hasAttachment:!0,allowApproval:!1,showApprovalTime:!1,form:{title:"",categoryId:"",categoryTitle:"",place:"",content:"",attachmentUrl:"",approvalState:"",approvalTime:"",approvalSuggestion:""},userForm:{realName:"",name:"",password:"",sex:"",phone:"",email:"",address:"",card:""}}},methods:{getLoginUser:function(){var e=this;e.$http.get("/api/user/current").then(function(t){var a=t.data,r=a.data;null==r&&this.$router.push("/login"),"staff"!=r.type&&"admin"!=r.type||(e.isStaff=!0)}).then(function(e){console.log(e)})},getReportData:function(e){if(null==e)return this.$router.push({path:"/reportList"});var t=this,a={id:e};t.$http.get("/api/report/details",{params:a}).then(function(e){console.log(e);var a=e.data,r=a.data;t.allowApproval=r.allowApproval,2!=r.approvalState&&-1!=r.approvalState||(t.showApprovalTime=!0),0==r.approvalState?r.approvalState="待审核":1==r.approvalState?r.approvalState="初审通过":2==r.approvalState?r.approvalState="审核通过":-1==r.approvalState&&(r.approvalState="驳回"),null!=r.attachmentUrl&&""!=r.attachmentUrl||(r.attachmentUrl="无",t.hasAttachment=!1),t.form=r,t.userForm=r.user}).then(function(e){console.log(e)})},download:function(){var e=document.createElement("a");e.target="_blank",e.href=this.form.attachmentUrl,e.click()},pass:function(){var e=this,t=e.form.approvalSuggestion,a=e.form.id,r={id:a,approvalSuggestion:t};e.$http.post("/api/report/pass",r).then(function(t){console.log(t),0==t.data.code?(e.$message.success(t.data.msg),e.getReportData(a)):e.$message.error(t.data.msg)}).then(function(e){console.log(e)})},refuse:function(){var e=this,t=e.form.approvalSuggestion,a=e.form.id;""!=t&&null!=t||e.$message.error("请输入审核意见");var r={id:a,approvalSuggestion:t};e.$http.post("/api/report/refuse",r).then(function(t){console.log(t),0==t.data.code?(e.getReportData(a),e.$message.success(t.data.msg)):e.$message.error(t.data.msg)}).then(function(e){console.log(e)})},back:function(){this.$router.push("/reportList")}},created:function(){this.getLoginUser(),this.getReportData(this.$route.params.id)}}},468:function(e,t,a){t=e.exports=a(71)(!1),t.push([e.i,".userContent{margin:0 auto}.el-input.is-disabled .el-input__inner,.el-textarea.is-disabled .el-textarea__inner{background-color:#fff;border-color:#fff;color:#222;cursor:pointer}",""])},484:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("信访列表")]),e._v(" "),a("el-breadcrumb-item",[e._v("信访详情")])],1)],1),e._v(" "),a("div",{staticClass:"userContent"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{prop:"title",label:"标题"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"categoryTitle",label:"内容分类"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.categoryTitle,callback:function(t){e.$set(e.form,"categoryTitle",t)},expression:"form.categoryTitle"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"address",label:"问题发生地"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.place,callback:function(t){e.$set(e.form,"place",t)},expression:"form.place"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"content",label:"信访内容"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:50},disabled:""},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"attachmentUrl",label:"附件"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.attachmentUrl,callback:function(t){e.$set(e.form,"attachmentUrl",t)},expression:"form.attachmentUrl"}}),e._v(" "),e.hasAttachment?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.download()}}},[e._v("下载\n                        ")]):e._e()],1),e._v(" "),e.isStaff?a("el-form-item",{attrs:{prop:"approvalState",label:"审核状态"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.approvalState,callback:function(t){e.$set(e.form,"approvalState",t)},expression:"form.approvalState"}})],1):e._e(),e._v(" "),e.showApprovalTime?a("el-form-item",{attrs:{prop:"approvalTime",label:"审核时间"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.approvalTime,callback:function(t){e.$set(e.form,"approvalTime",t)},expression:"form.approvalTime"}})],1):e._e(),e._v(" "),e.isStaff?a("el-form-item",{attrs:{prop:"approvalSuggestion",label:"审核意见"}},[a("el-input",{attrs:{type:"textarea",rows:5,disabled:!e.allowApproval},model:{value:e.form.approvalSuggestion,callback:function(t){e.$set(e.form,"approvalSuggestion",t)},expression:"form.approvalSuggestion"}})],1):e._e(),e._v(" "),e.allowApproval?a("el-form-item",{attrs:{id:"operateBox"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.pass()}}},[e._v("通过")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.refuse()}}},[e._v("驳回")]),e._v(" "),a("el-button",{on:{click:function(t){e.back()}}},[e._v("返回")])],1):e._e()],1)],1),e._v(" "),a("el-col",{staticStyle:{"padding-left":"100px"},attrs:{span:12}},[e.isStaff?a("el-form",{ref:"form",attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{prop:"realName",label:"姓名"}},[a("el-input",{attrs:{disabled:""},model:{value:e.userForm.realName,callback:function(t){e.$set(e.userForm,"realName",t)},expression:"userForm.realName"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"name",label:"登录名"}},[a("el-input",{attrs:{disabled:""},model:{value:e.userForm.name,callback:function(t){e.$set(e.userForm,"name",t)},expression:"userForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"password",label:"密码"}},[a("el-input",{attrs:{disabled:""},model:{value:e.userForm.password,callback:function(t){e.$set(e.userForm,"password",t)},expression:"userForm.password"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"sex",label:"性别"}},[a("el-input",{attrs:{disabled:""},model:{value:e.userForm.sex,callback:function(t){e.$set(e.userForm,"sex",t)},expression:"userForm.sex"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"phone",label:"电话"}},[a("el-input",{attrs:{disabled:""},model:{value:e.userForm.phone,callback:function(t){e.$set(e.userForm,"phone",t)},expression:"userForm.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"email",label:"电子邮箱"}},[a("el-input",{attrs:{disabled:""},model:{value:e.userForm.email,callback:function(t){e.$set(e.userForm,"email",t)},expression:"userForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"address",label:"联系地址"}},[a("el-input",{attrs:{disabled:""},model:{value:e.userForm.address,callback:function(t){e.$set(e.userForm,"address",t)},expression:"userForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"card",label:"身份证号码"}},[a("el-input",{attrs:{disabled:""},model:{value:e.userForm.card,callback:function(t){e.$set(e.userForm,"card",t)},expression:"userForm.card"}})],1)],1):e._e(),e._v(" "),e.isStaff?e._e():a("el-form",{ref:"form",attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{prop:"approvalState",label:"审核状态"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.approvalState,callback:function(t){e.$set(e.form,"approvalState",t)},expression:"form.approvalState"}})],1),e._v(" "),e.showApprovalTime?a("el-form-item",{attrs:{prop:"approvalTime",label:"审核时间"}},[a("el-input",{attrs:{disabled:""},model:{value:e.form.approvalTime,callback:function(t){e.$set(e.form,"approvalTime",t)},expression:"form.approvalTime"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{prop:"approvalSuggestion",label:"审核意见"}},[a("el-input",{attrs:{type:"textarea",rows:5,disabled:""},model:{value:e.form.approvalSuggestion,callback:function(t){e.$set(e.form,"approvalSuggestion",t)},expression:"form.approvalSuggestion"}})],1)],1)],1)],1)],1)])},staticRenderFns:[]}},499:function(e,t,a){var r=a(468);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(159)("2b18633a",r,!0)}});